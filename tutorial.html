<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Introducing FSharpComposableQuery
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="A short summary of your project">
    <meta name="author" content="Your Name">

    <script src="http://code.jquery.com/jquery-1.8.0.js"></script>
    <script src="http://code.jquery.com/ui/1.8.23/jquery-ui.js"></script>
    <script src="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/js/bootstrap.min.js"></script>
    <link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.2.1/css/bootstrap-combined.min.css" rel="stylesheet">

    <link type="text/css" rel="stylesheet" href="http://fsprojects.github.io/FSharp.Linq.Experimental.ComposableQuery/content/style.css" />
    <script type="text/javascript" src="http://fsprojects.github.io/FSharp.Linq.Experimental.ComposableQuery/content/tips.js"></script>
    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container">
      <div class="masthead">
        <ul class="nav nav-pills pull-right">
          <li><a href="http://fsharp.org">fsharp.org</a></li>
          <li><a href="http://github.com/fsharp/FSharpComposableQuery">github page</a></li>
        </ul>
        <h3 class="muted">FSharpComposableQuery</h3>
      </div>
      <hr />
      <div class="row">
        <div class="span9" id="main">
          
<h1>Introducing FSharpComposableQuery</h1>

<p>(<strong>work in progress</strong>)</p>

<p>Compositional Query Framework for F# Queries, based on 
<a href="http://dl.acm.org/citation.cfm?id=2500586">A Practical Theory of Language-Integrated Query (ICFP 2013)</a>.</p>
<h2>Referencing the library</h2>
<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="prep">#r</span> <span class="s">&quot;</span><span class="s">FSharpComposableQuery</span><span class="s">.</span><span class="s">dll</span><span class="s">&quot;</span>
<span class="prep">#r</span> <span class="s">&quot;</span><span class="s">FSharp</span><span class="s">.</span><span class="s">Data</span><span class="s">.</span><span class="s">TypeProviders</span><span class="s">.</span><span class="s">dll</span><span class="s">&quot;</span>
<span class="prep">#r</span> <span class="s">&quot;</span><span class="s">System</span><span class="s">.</span><span class="s">Data</span><span class="s">.</span><span class="s">dll</span><span class="s">&quot;</span>
<span class="prep">#r</span> <span class="s">&quot;</span><span class="s">System</span><span class="s">.</span><span class="s">Data</span><span class="s">.</span><span class="s">Linq</span><span class="s">.</span><span class="s">dll</span><span class="s">&quot;</span>

<span class="k">open</span> <span onmouseout="hideTip(event, 'fs1', 1)" onmouseover="showTip(event, 'fs1', 1)" class="i">Microsoft</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs2', 2)" onmouseover="showTip(event, 'fs2', 2)" class="i">FSharp</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs3', 3)" onmouseover="showTip(event, 'fs3', 3)" class="i">Data</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs4', 4)" onmouseover="showTip(event, 'fs4', 4)" class="i">TypeProviders</span>
<span class="k">open</span> <span onmouseout="hideTip(event, 'fs5', 5)" onmouseover="showTip(event, 'fs5', 5)" class="i">FSharpComposableQuery</span></pre>
</td>
</tr>
</table><p>All existing F# database and in-memory queries should work as normal. For example:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs6', 6)" onmouseover="showTip(event, 'fs6', 6)" class="i">data</span> <span class="o">=</span> [<span class="n">1</span>; <span class="n">5</span>; <span class="n">7</span>; <span class="n">11</span>; <span class="n">18</span>; <span class="n">21</span>]
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs7', 7)" onmouseover="showTip(event, 'fs7', 7)" class="i">lastNumberInSortedList</span> <span class="o">=</span>
    <span onmouseout="hideTip(event, 'fs8', 8)" onmouseover="showTip(event, 'fs8', 8)" class="i">query</span> {
        <span class="k">for</span> <span onmouseout="hideTip(event, 'fs9', 9)" onmouseover="showTip(event, 'fs9', 9)" class="i">s</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs6', 10)" onmouseover="showTip(event, 'fs6', 10)" class="i">data</span> <span class="k">do</span>
        <span onmouseout="hideTip(event, 'fs10', 11)" onmouseover="showTip(event, 'fs10', 11)" class="k">sortBy</span> <span onmouseout="hideTip(event, 'fs9', 12)" onmouseover="showTip(event, 'fs9', 12)" class="i">s</span>
        <span onmouseout="hideTip(event, 'fs11', 13)" onmouseover="showTip(event, 'fs11', 13)" class="k">last</span>
    }</pre>
</td>
</tr>
</table><p>In addition, more queries and query compositions work.  We illustrate this through several examples below.</p>
<h2>Parameterizing a query</h2>

<p>LINQ already supports queries with parameters, as long as those parameters are of base type.  For example, 
to obntain the set fo people with age between two bounds, you can create a query parameterized by two integers:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
<span class="l">13: </span>
<span class="l">14: </span>
<span class="l">15: </span>
<span class="l">16: </span>
<span class="l">17: </span>
<span class="l">18: </span>
<span class="l">19: </span>
<span class="l">20: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
[&lt;<span onmouseout="hideTip(event, 'fs12', 14)" onmouseover="showTip(event, 'fs12', 14)" class="i">Literal</span>&gt;]
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs13', 15)" onmouseover="showTip(event, 'fs13', 15)" class="i">ConnectionString</span> <span class="o">=</span> 
  <span class="s">&quot;</span><span class="s">Data</span><span class="s"> </span><span class="s">Source</span><span class="s">=</span><span class="s">(</span><span class="s">localdb</span><span class="s">)</span><span class="s">\</span><span class="s">MyInstance</span><span class="s">;</span><span class="s">\</span>
<span class="s">   </span><span class="s">Initial</span><span class="s"> </span><span class="s">Catalog</span><span class="s">=</span><span class="s">MyPeople</span><span class="s">;</span>
<span class="s">   </span><span class="s">Integrated</span><span class="s"> </span><span class="s">Security</span><span class="s">=</span><span class="s">SSPI</span><span class="s">&quot;</span>;;

<span class="k">type</span> <span onmouseout="hideTip(event, 'fs14', 16)" onmouseover="showTip(event, 'fs14', 16)" class="i">dbSchema</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs15', 17)" onmouseover="showTip(event, 'fs15', 17)" class="i">SqlDataConnection</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs13', 18)" onmouseover="showTip(event, 'fs13', 18)" class="i">ConnectionString</span><span class="o">&gt;</span>;;
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs16', 19)" onmouseover="showTip(event, 'fs16', 19)" class="i">db</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 20)" onmouseover="showTip(event, 'fs14', 20)" class="i">dbSchema</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs17', 21)" onmouseover="showTip(event, 'fs17', 21)" class="i">GetDataContext</span>();;

<span class="k">type</span> <span onmouseout="hideTip(event, 'fs18', 22)" onmouseover="showTip(event, 'fs18', 22)" class="i">People</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs14', 23)" onmouseover="showTip(event, 'fs14', 23)" class="i">dbSchema</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs19', 24)" onmouseover="showTip(event, 'fs19', 24)" class="i">ServiceTypes</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs20', 25)" onmouseover="showTip(event, 'fs20', 25)" class="i">People</span>
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs21', 26)" onmouseover="showTip(event, 'fs21', 26)" class="i">PeopleR</span> <span class="o">=</span> {<span onmouseout="hideTip(event, 'fs22', 27)" onmouseover="showTip(event, 'fs22', 27)" class="i">name</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs23', 28)" onmouseover="showTip(event, 'fs23', 28)" class="i">string</span>;<span onmouseout="hideTip(event, 'fs24', 29)" onmouseover="showTip(event, 'fs24', 29)" class="i">age</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs25', 30)" onmouseover="showTip(event, 'fs25', 30)" class="i">int</span>}

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs26', 31)" onmouseover="showTip(event, 'fs26', 31)" class="i">range1</span> <span class="o">=</span> <span class="k">fun</span> (<span onmouseout="hideTip(event, 'fs27', 32)" onmouseover="showTip(event, 'fs27', 32)" class="i">a</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs25', 33)" onmouseover="showTip(event, 'fs25', 33)" class="i">int</span>) (<span onmouseout="hideTip(event, 'fs28', 34)" onmouseover="showTip(event, 'fs28', 34)" class="i">b</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs25', 35)" onmouseover="showTip(event, 'fs25', 35)" class="i">int</span>) <span class="k">-&gt;</span> 
  <span onmouseout="hideTip(event, 'fs8', 36)" onmouseover="showTip(event, 'fs8', 36)" class="i">query</span> {
    <span class="k">for</span> <span onmouseout="hideTip(event, 'fs29', 37)" onmouseover="showTip(event, 'fs29', 37)" class="i">u</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs16', 38)" onmouseover="showTip(event, 'fs16', 38)" class="i">db</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs30', 39)" onmouseover="showTip(event, 'fs30', 39)" class="i">People</span> <span class="k">do</span>
    <span class="k">if</span> <span onmouseout="hideTip(event, 'fs27', 40)" onmouseover="showTip(event, 'fs27', 40)" class="i">a</span> <span class="o">&lt;=</span> <span onmouseout="hideTip(event, 'fs29', 41)" onmouseover="showTip(event, 'fs29', 41)" class="i">u</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 42)" onmouseover="showTip(event, 'fs31', 42)" class="i">Age</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs29', 43)" onmouseover="showTip(event, 'fs29', 43)" class="i">u</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 44)" onmouseover="showTip(event, 'fs31', 44)" class="i">Age</span> <span class="o">&lt;</span> <span onmouseout="hideTip(event, 'fs28', 45)" onmouseover="showTip(event, 'fs28', 45)" class="i">b</span> 
    <span class="k">then</span> <span class="k">yield</span> {<span class="i">name</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs29', 46)" onmouseover="showTip(event, 'fs29', 46)" class="i">u</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs32', 47)" onmouseover="showTip(event, 'fs32', 47)" class="i">Name</span>;<span class="i">age</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs29', 48)" onmouseover="showTip(event, 'fs29', 48)" class="i">u</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 49)" onmouseover="showTip(event, 'fs31', 49)" class="i">Age</span>}
    } 

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs33', 50)" onmouseover="showTip(event, 'fs33', 50)" class="i">ex1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs26', 51)" onmouseover="showTip(event, 'fs26', 51)" class="i">range1</span> <span class="n">30</span> <span class="n">40</span></pre>
</td>
</tr>
</table><p>However, doing it this way is not especially reusable, and we recommend doing it this way instead:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs34', 52)" onmouseover="showTip(event, 'fs34', 52)" class="i">range</span> <span class="o">=</span> &lt;@ <span class="k">fun</span> (<span onmouseout="hideTip(event, 'fs27', 53)" onmouseover="showTip(event, 'fs27', 53)" class="i">a</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs25', 54)" onmouseover="showTip(event, 'fs25', 54)" class="i">int</span>) (<span onmouseout="hideTip(event, 'fs28', 55)" onmouseover="showTip(event, 'fs28', 55)" class="i">b</span><span class="o">:</span><span onmouseout="hideTip(event, 'fs25', 56)" onmouseover="showTip(event, 'fs25', 56)" class="i">int</span>) <span class="k">-&gt;</span> 
  <span onmouseout="hideTip(event, 'fs8', 57)" onmouseover="showTip(event, 'fs8', 57)" class="i">query</span> {
    <span class="k">for</span> <span onmouseout="hideTip(event, 'fs29', 58)" onmouseover="showTip(event, 'fs29', 58)" class="i">u</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs16', 59)" onmouseover="showTip(event, 'fs16', 59)" class="i">db</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs30', 60)" onmouseover="showTip(event, 'fs30', 60)" class="i">People</span> <span class="k">do</span>
    <span class="k">if</span> <span onmouseout="hideTip(event, 'fs27', 61)" onmouseover="showTip(event, 'fs27', 61)" class="i">a</span> <span class="o">&lt;=</span> <span onmouseout="hideTip(event, 'fs29', 62)" onmouseover="showTip(event, 'fs29', 62)" class="i">u</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 63)" onmouseover="showTip(event, 'fs31', 63)" class="i">Age</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs29', 64)" onmouseover="showTip(event, 'fs29', 64)" class="i">u</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 65)" onmouseover="showTip(event, 'fs31', 65)" class="i">Age</span> <span class="o">&lt;</span> <span onmouseout="hideTip(event, 'fs28', 66)" onmouseover="showTip(event, 'fs28', 66)" class="i">b</span> 
    <span class="k">then</span> <span class="k">yield</span> {<span class="i">name</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs29', 67)" onmouseover="showTip(event, 'fs29', 67)" class="i">u</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs32', 68)" onmouseover="showTip(event, 'fs32', 68)" class="i">Name</span>;<span class="i">age</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs29', 69)" onmouseover="showTip(event, 'fs29', 69)" class="i">u</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 70)" onmouseover="showTip(event, 'fs31', 70)" class="i">Age</span>}
    }  @&gt;

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs35', 71)" onmouseover="showTip(event, 'fs35', 71)" class="i">ex2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs8', 72)" onmouseover="showTip(event, 'fs8', 72)" class="i">query</span> { <span class="k">for</span> <span onmouseout="hideTip(event, 'fs36', 73)" onmouseover="showTip(event, 'fs36', 73)" class="i">x</span> <span class="k">in</span> (<span class="o">%</span><span onmouseout="hideTip(event, 'fs34', 74)" onmouseover="showTip(event, 'fs34', 74)" class="i">range</span>) <span class="n">30</span> <span class="n">40</span> <span class="k">do</span> <span class="k">yield</span> <span onmouseout="hideTip(event, 'fs36', 75)" onmouseover="showTip(event, 'fs36', 75)" class="i">x</span>}</pre>
</td>
</tr>
</table><p>The reason is that the first approach only works if the parameters are constants of base type;
the second is more flexible.</p>
<h2>The RunQuery operator</h2>

<p>It's a little awkward to evaluate composite queries due to the fact that we can't splice them directly into 
the query brackets: this typechecks, but doesn't do the right thing.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs37', 76)" onmouseover="showTip(event, 'fs37', 76)" class="i">wrongEx2</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs38', 77)" onmouseover="showTip(event, 'fs38', 77)" class="i">System</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs39', 78)" onmouseover="showTip(event, 'fs39', 78)" class="i">Linq</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs40', 79)" onmouseover="showTip(event, 'fs40', 79)" class="i">IQueryable</span><span class="o">&lt;</span><span onmouseout="hideTip(event, 'fs21', 80)" onmouseover="showTip(event, 'fs21', 80)" class="i">PeopleR</span><span class="o">&gt;</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs8', 81)" onmouseover="showTip(event, 'fs8', 81)" class="i">query</span> { (<span class="o">%</span><span onmouseout="hideTip(event, 'fs34', 82)" onmouseover="showTip(event, 'fs34', 82)" class="i">range</span>) <span class="n">30</span> <span class="n">40</span> }</pre>
</td>
</tr>
</table><p>To simplify the use of composite queries, we define the following convenience operation that 
evaluates a quoted query result directly:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs41', 83)" onmouseover="showTip(event, 'fs41', 83)" class="i">runQuery</span> <span onmouseout="hideTip(event, 'fs42', 84)" onmouseover="showTip(event, 'fs42', 84)" class="i">q</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs8', 85)" onmouseover="showTip(event, 'fs8', 85)" class="i">query</span> { <span class="k">for</span> <span onmouseout="hideTip(event, 'fs43', 86)" onmouseover="showTip(event, 'fs43', 86)" class="i">x</span> <span class="k">in</span> (<span class="o">%</span><span onmouseout="hideTip(event, 'fs42', 87)" onmouseover="showTip(event, 'fs42', 87)" class="i">q</span>) <span class="k">do</span> <span class="k">yield</span> <span onmouseout="hideTip(event, 'fs43', 88)" onmouseover="showTip(event, 'fs43', 88)" class="i">x</span> }</pre>
</td>
</tr>
</table><p>Then, we can equivalently just do:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs44', 89)" onmouseover="showTip(event, 'fs44', 89)" class="i">ex2again</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs41', 90)" onmouseover="showTip(event, 'fs41', 90)" class="i">runQuery</span> &lt;@ (<span class="o">%</span><span onmouseout="hideTip(event, 'fs34', 91)" onmouseover="showTip(event, 'fs34', 91)" class="i">range</span>) <span class="n">30</span> <span class="n">40</span> @&gt;</pre>
</td>
</tr>
</table><h2>Building queries using query combinators</h2>

<p>You can build queries up using other query combinators as follows:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
<span class="l">11: </span>
<span class="l">12: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs45', 92)" onmouseover="showTip(event, 'fs45', 92)" class="i">ageFromName</span> <span class="o">=</span> 
  &lt;@ <span class="k">fun</span> <span onmouseout="hideTip(event, 'fs46', 93)" onmouseover="showTip(event, 'fs46', 93)" class="i">s</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs8', 94)" onmouseover="showTip(event, 'fs8', 94)" class="i">query</span> {
        <span class="k">for</span> <span onmouseout="hideTip(event, 'fs29', 95)" onmouseover="showTip(event, 'fs29', 95)" class="i">u</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs16', 96)" onmouseover="showTip(event, 'fs16', 96)" class="i">db</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs30', 97)" onmouseover="showTip(event, 'fs30', 97)" class="i">People</span> <span class="k">do</span> 
        <span class="k">if</span> <span onmouseout="hideTip(event, 'fs46', 98)" onmouseover="showTip(event, 'fs46', 98)" class="i">s</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs29', 99)" onmouseover="showTip(event, 'fs29', 99)" class="i">u</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs32', 100)" onmouseover="showTip(event, 'fs32', 100)" class="i">Name</span> <span class="k">then</span> 
          <span class="k">yield</span> <span onmouseout="hideTip(event, 'fs29', 101)" onmouseover="showTip(event, 'fs29', 101)" class="i">u</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 102)" onmouseover="showTip(event, 'fs31', 102)" class="i">Age</span> } @&gt;

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs47', 103)" onmouseover="showTip(event, 'fs47', 103)" class="i">compose</span> <span class="o">=</span> 
  &lt;@ <span class="k">fun</span> <span onmouseout="hideTip(event, 'fs46', 104)" onmouseover="showTip(event, 'fs46', 104)" class="i">s</span> <span onmouseout="hideTip(event, 'fs48', 105)" onmouseover="showTip(event, 'fs48', 105)" class="i">t</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs8', 106)" onmouseover="showTip(event, 'fs8', 106)" class="i">query</span> {
      <span class="k">for</span> <span onmouseout="hideTip(event, 'fs27', 107)" onmouseover="showTip(event, 'fs27', 107)" class="i">a</span> <span class="k">in</span> (<span class="o">%</span><span onmouseout="hideTip(event, 'fs45', 108)" onmouseover="showTip(event, 'fs45', 108)" class="i">ageFromName</span>) <span onmouseout="hideTip(event, 'fs46', 109)" onmouseover="showTip(event, 'fs46', 109)" class="i">s</span> <span class="k">do</span>
      <span class="k">for</span> <span onmouseout="hideTip(event, 'fs28', 110)" onmouseover="showTip(event, 'fs28', 110)" class="i">b</span> <span class="k">in</span> (<span class="o">%</span><span onmouseout="hideTip(event, 'fs45', 111)" onmouseover="showTip(event, 'fs45', 111)" class="i">ageFromName</span>) <span onmouseout="hideTip(event, 'fs48', 112)" onmouseover="showTip(event, 'fs48', 112)" class="i">t</span> <span class="k">do</span> 
      <span class="k">yield!</span> (<span class="o">%</span><span onmouseout="hideTip(event, 'fs34', 113)" onmouseover="showTip(event, 'fs34', 113)" class="i">range</span>) <span onmouseout="hideTip(event, 'fs27', 114)" onmouseover="showTip(event, 'fs27', 114)" class="i">a</span> <span onmouseout="hideTip(event, 'fs28', 115)" onmouseover="showTip(event, 'fs28', 115)" class="i">b</span>
  } @&gt;</pre>
</td>
</tr>
</table><p>We could have defined this more directly as a single parameterized query as follows:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs49', 116)" onmouseover="showTip(event, 'fs49', 116)" class="i">composeMonolithic</span> <span class="o">=</span> 
  &lt;@ <span class="k">fun</span> <span onmouseout="hideTip(event, 'fs46', 117)" onmouseover="showTip(event, 'fs46', 117)" class="i">s</span> <span onmouseout="hideTip(event, 'fs48', 118)" onmouseover="showTip(event, 'fs48', 118)" class="i">t</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs8', 119)" onmouseover="showTip(event, 'fs8', 119)" class="i">query</span> {
      <span class="k">for</span> <span onmouseout="hideTip(event, 'fs50', 120)" onmouseover="showTip(event, 'fs50', 120)" class="i">u1</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs16', 121)" onmouseover="showTip(event, 'fs16', 121)" class="i">db</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs30', 122)" onmouseover="showTip(event, 'fs30', 122)" class="i">People</span> <span class="k">do</span>
      <span class="k">for</span> <span onmouseout="hideTip(event, 'fs51', 123)" onmouseover="showTip(event, 'fs51', 123)" class="i">u2</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs16', 124)" onmouseover="showTip(event, 'fs16', 124)" class="i">db</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs30', 125)" onmouseover="showTip(event, 'fs30', 125)" class="i">People</span> <span class="k">do</span> 
      <span class="k">for</span> <span onmouseout="hideTip(event, 'fs29', 126)" onmouseover="showTip(event, 'fs29', 126)" class="i">u</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs16', 127)" onmouseover="showTip(event, 'fs16', 127)" class="i">db</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs30', 128)" onmouseover="showTip(event, 'fs30', 128)" class="i">People</span> <span class="k">do</span>
      <span class="k">if</span> <span onmouseout="hideTip(event, 'fs46', 129)" onmouseover="showTip(event, 'fs46', 129)" class="i">s</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs50', 130)" onmouseover="showTip(event, 'fs50', 130)" class="i">u1</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs32', 131)" onmouseover="showTip(event, 'fs32', 131)" class="i">Name</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs48', 132)" onmouseover="showTip(event, 'fs48', 132)" class="i">t</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs51', 133)" onmouseover="showTip(event, 'fs51', 133)" class="i">u2</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs32', 134)" onmouseover="showTip(event, 'fs32', 134)" class="i">Name</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs50', 135)" onmouseover="showTip(event, 'fs50', 135)" class="i">u1</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 136)" onmouseover="showTip(event, 'fs31', 136)" class="i">Age</span> <span class="o">&lt;=</span> <span onmouseout="hideTip(event, 'fs29', 137)" onmouseover="showTip(event, 'fs29', 137)" class="i">u</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 138)" onmouseover="showTip(event, 'fs31', 138)" class="i">Age</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs29', 139)" onmouseover="showTip(event, 'fs29', 139)" class="i">u</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 140)" onmouseover="showTip(event, 'fs31', 140)" class="i">Age</span> <span class="o">&lt;</span> <span onmouseout="hideTip(event, 'fs51', 141)" onmouseover="showTip(event, 'fs51', 141)" class="i">u2</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 142)" onmouseover="showTip(event, 'fs31', 142)" class="i">Age</span> <span class="k">then</span>
        <span class="k">yield</span> {<span class="i">name</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs29', 143)" onmouseover="showTip(event, 'fs29', 143)" class="i">u</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs32', 144)" onmouseover="showTip(event, 'fs32', 144)" class="i">Name</span>;<span class="i">age</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs29', 145)" onmouseover="showTip(event, 'fs29', 145)" class="i">u</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 146)" onmouseover="showTip(event, 'fs31', 146)" class="i">Age</span>}
  } @&gt;</pre>
</td>
</tr>
</table><p>But this involves some code duplication and renaming, and if the subquery we use to find a person's age from their name were to
change, then we would have to change both places --- easy to get wrong.  This way of building the query up from 
components leads to more maintainable code.</p>

<p>Moreover, this small query is easy enough to compose in your head, but as the size of the query and number of tables 
involved grows, keeping the different parameters and constraints straight becomes more tedious and error-prone.  This
way of defining a query such as compose means that the logical meaning of the query is easy to see by reading the code, 
and the FSharpComposableQuery library does the work of normalizing the query to a form that an SQL database can evaluate
efficiently.</p>
<h2>Higher-order parameters</h2>

<p>FSharpComposableQuery lifts the restriction that the parameters to a query have to be of base type: instead,
they can be higher-order functions.<br />
(Actually, F# does handle some higher-order functions, but FSharpComposableQuery provides a stronger guarantee
of good behavior.)</p>

<p>For example, we can define a query combinator that takes a function</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l"> 1: </span>
<span class="l"> 2: </span>
<span class="l"> 3: </span>
<span class="l"> 4: </span>
<span class="l"> 5: </span>
<span class="l"> 6: </span>
<span class="l"> 7: </span>
<span class="l"> 8: </span>
<span class="l"> 9: </span>
<span class="l">10: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs52', 147)" onmouseover="showTip(event, 'fs52', 147)" class="i">satisfies</span>  <span class="o">=</span> 
 &lt;@ <span class="k">fun</span> <span onmouseout="hideTip(event, 'fs53', 148)" onmouseover="showTip(event, 'fs53', 148)" class="i">p</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs8', 149)" onmouseover="showTip(event, 'fs8', 149)" class="i">query</span> { 
    <span class="k">for</span> <span onmouseout="hideTip(event, 'fs29', 150)" onmouseover="showTip(event, 'fs29', 150)" class="i">u</span> <span class="k">in</span> <span onmouseout="hideTip(event, 'fs16', 151)" onmouseover="showTip(event, 'fs16', 151)" class="i">db</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs30', 152)" onmouseover="showTip(event, 'fs30', 152)" class="i">People</span> <span class="k">do</span>
    <span class="k">if</span> <span onmouseout="hideTip(event, 'fs53', 153)" onmouseover="showTip(event, 'fs53', 153)" class="i">p</span> <span onmouseout="hideTip(event, 'fs29', 154)" onmouseover="showTip(event, 'fs29', 154)" class="i">u</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 155)" onmouseover="showTip(event, 'fs31', 155)" class="i">Age</span> 
    <span class="k">then</span> <span class="k">yield</span> {<span class="i">name</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs29', 156)" onmouseover="showTip(event, 'fs29', 156)" class="i">u</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs32', 157)" onmouseover="showTip(event, 'fs32', 157)" class="i">Name</span>;<span class="i">age</span><span class="o">=</span><span onmouseout="hideTip(event, 'fs29', 158)" onmouseover="showTip(event, 'fs29', 158)" class="i">u</span><span class="o">.</span><span onmouseout="hideTip(event, 'fs31', 159)" onmouseover="showTip(event, 'fs31', 159)" class="i">Age</span>}
   } @&gt;

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs54', 160)" onmouseover="showTip(event, 'fs54', 160)" class="i">ex3</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs41', 161)" onmouseover="showTip(event, 'fs41', 161)" class="i">runQuery</span> &lt;@ (<span class="o">%</span><span onmouseout="hideTip(event, 'fs52', 162)" onmouseover="showTip(event, 'fs52', 162)" class="i">satisfies</span>) (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs55', 163)" onmouseover="showTip(event, 'fs55', 163)" class="i">x</span> <span class="k">-&gt;</span> <span class="n">20</span> <span class="o">&lt;=</span> <span onmouseout="hideTip(event, 'fs55', 164)" onmouseover="showTip(event, 'fs55', 164)" class="i">x</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs55', 165)" onmouseover="showTip(event, 'fs55', 165)" class="i">x</span> <span class="o">&lt;</span> <span class="n">30</span> ) @&gt;

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs56', 166)" onmouseover="showTip(event, 'fs56', 166)" class="i">ex4</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs41', 167)" onmouseover="showTip(event, 'fs41', 167)" class="i">runQuery</span> &lt;@ (<span class="o">%</span><span onmouseout="hideTip(event, 'fs52', 168)" onmouseover="showTip(event, 'fs52', 168)" class="i">satisfies</span>) (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs55', 169)" onmouseover="showTip(event, 'fs55', 169)" class="i">x</span> <span class="k">-&gt;</span>  <span onmouseout="hideTip(event, 'fs55', 170)" onmouseover="showTip(event, 'fs55', 170)" class="i">x</span> <span class="o">%</span> <span class="n">2</span> <span class="o">=</span> <span class="n">0</span> ) @&gt;</pre>
</td>
</tr>
</table><p>This is subject to some side-conditions: basically, the function you pass into a higher-order query combinator
may only perform operations that are sensible on the database; recursion and side-effects such as printing are not allowed,
and will result in a run-time error.</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs57', 171)" onmouseover="showTip(event, 'fs57', 171)" class="i">wrong1</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs41', 172)" onmouseover="showTip(event, 'fs41', 172)" class="i">runQuery</span> &lt;@ (<span class="o">%</span><span onmouseout="hideTip(event, 'fs52', 173)" onmouseover="showTip(event, 'fs52', 173)" class="i">satisfies</span>) (<span class="k">fun</span> <span onmouseout="hideTip(event, 'fs58', 174)" onmouseover="showTip(event, 'fs58', 174)" class="i">age</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs59', 175)" onmouseover="showTip(event, 'fs59', 175)" class="i">printfn</span> <span class="s">&quot;</span><span class="s">%</span><span class="s">d</span><span class="s">&quot;</span> <span onmouseout="hideTip(event, 'fs58', 176)" onmouseover="showTip(event, 'fs58', 176)" class="i">age</span>; <span class="k">true</span>) @&gt;

<span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs60', 177)" onmouseover="showTip(event, 'fs60', 177)" class="i">even</span> <span onmouseout="hideTip(event, 'fs61', 178)" onmouseover="showTip(event, 'fs61', 178)" class="i">n</span> <span class="o">=</span> <span class="k">if</span> <span onmouseout="hideTip(event, 'fs61', 179)" onmouseover="showTip(event, 'fs61', 179)" class="i">n</span> <span class="o">=</span> <span class="n">0</span> <span class="k">then</span> <span class="k">true</span>
                 <span class="k">else</span> <span class="k">if</span> <span onmouseout="hideTip(event, 'fs61', 180)" onmouseover="showTip(event, 'fs61', 180)" class="i">n</span> <span class="o">=</span> <span class="n">1</span> <span class="k">then</span> <span class="k">false</span>
                 <span class="k">else</span> <span onmouseout="hideTip(event, 'fs60', 181)" onmouseover="showTip(event, 'fs60', 181)" class="i">even</span>(<span onmouseout="hideTip(event, 'fs61', 182)" onmouseover="showTip(event, 'fs61', 182)" class="i">n</span><span class="o">-</span><span class="n">2</span>)
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs62', 183)" onmouseover="showTip(event, 'fs62', 183)" class="i">wrong2</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs41', 184)" onmouseover="showTip(event, 'fs41', 184)" class="i">runQuery</span> &lt;@ (<span class="o">%</span><span onmouseout="hideTip(event, 'fs52', 185)" onmouseover="showTip(event, 'fs52', 185)" class="i">satisfies</span>) <span onmouseout="hideTip(event, 'fs60', 186)" onmouseover="showTip(event, 'fs60', 186)" class="i">even</span> @&gt;</pre>
</td>
</tr>
</table><p>Note that wrong2 is morally equivalent to ex4 above (provided ages are nonnegative), but is not allowed.  The library
is not smart enough to determine that the parameter passed into satisfies is equivalent to an operation that
can be performed on the database (using modular arithmetic); you have to do this yourself.</p>
<h2>Building queries using recursion</h2>

<p>Although recursion is not allowed <em>within</em> a query, you can still use recursion to <em>build</em> a query.</p>

<p>Consider the following datatype defining some Boolean predicates on ages:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">type</span> <span onmouseout="hideTip(event, 'fs63', 187)" onmouseover="showTip(event, 'fs63', 187)" class="i">Predicate</span> <span class="o">=</span> 
  | <span onmouseout="hideTip(event, 'fs64', 188)" onmouseover="showTip(event, 'fs64', 188)" class="i">Above</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs25', 189)" onmouseover="showTip(event, 'fs25', 189)" class="i">int</span>
  | <span onmouseout="hideTip(event, 'fs65', 190)" onmouseover="showTip(event, 'fs65', 190)" class="i">Below</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs25', 191)" onmouseover="showTip(event, 'fs25', 191)" class="i">int</span>
  | <span onmouseout="hideTip(event, 'fs66', 192)" onmouseover="showTip(event, 'fs66', 192)" class="i">And</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs63', 193)" onmouseover="showTip(event, 'fs63', 193)" class="i">Predicate</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs63', 194)" onmouseover="showTip(event, 'fs63', 194)" class="i">Predicate</span>
  | <span onmouseout="hideTip(event, 'fs67', 195)" onmouseover="showTip(event, 'fs67', 195)" class="i">Or</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs63', 196)" onmouseover="showTip(event, 'fs63', 196)" class="i">Predicate</span> <span class="o">*</span> <span onmouseout="hideTip(event, 'fs63', 197)" onmouseover="showTip(event, 'fs63', 197)" class="i">Predicate</span>
  | <span onmouseout="hideTip(event, 'fs68', 198)" onmouseover="showTip(event, 'fs68', 198)" class="i">Not</span> <span class="k">of</span> <span onmouseout="hideTip(event, 'fs63', 199)" onmouseover="showTip(event, 'fs63', 199)" class="i">Predicate</span></pre>
</td>
</tr>
</table><p>For example, we can define the "in their 30s" predicate two different ways as follows:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs69', 200)" onmouseover="showTip(event, 'fs69', 200)" class="i">t0</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs63', 201)" onmouseover="showTip(event, 'fs63', 201)" class="i">Predicate</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs66', 202)" onmouseover="showTip(event, 'fs66', 202)" class="i">And</span> (<span onmouseout="hideTip(event, 'fs64', 203)" onmouseover="showTip(event, 'fs64', 203)" class="i">Above</span> <span class="n">30</span>, <span onmouseout="hideTip(event, 'fs65', 204)" onmouseover="showTip(event, 'fs65', 204)" class="i">Below</span> <span class="n">40</span>)
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs70', 205)" onmouseover="showTip(event, 'fs70', 205)" class="i">t1</span> <span class="o">:</span> <span onmouseout="hideTip(event, 'fs63', 206)" onmouseover="showTip(event, 'fs63', 206)" class="i">Predicate</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs68', 207)" onmouseover="showTip(event, 'fs68', 207)" class="i">Not</span>(<span onmouseout="hideTip(event, 'fs67', 208)" onmouseover="showTip(event, 'fs67', 208)" class="i">Or</span>(<span onmouseout="hideTip(event, 'fs65', 209)" onmouseover="showTip(event, 'fs65', 209)" class="i">Below</span> <span class="n">30</span>, <span onmouseout="hideTip(event, 'fs64', 210)" onmouseover="showTip(event, 'fs64', 210)" class="i">Above</span> <span class="n">40</span>))</pre>
</td>
</tr>
</table><p>We can define an evaluator that takes a predicate and produces a <em>parameterized query</em> as follows:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs71', 211)" onmouseover="showTip(event, 'fs71', 211)" class="i">eval</span>(<span onmouseout="hideTip(event, 'fs72', 212)" onmouseover="showTip(event, 'fs72', 212)" class="i">t</span>) <span class="o">=</span>
  <span class="k">match</span> <span onmouseout="hideTip(event, 'fs72', 213)" onmouseover="showTip(event, 'fs72', 213)" class="i">t</span> <span class="k">with</span>
  | <span onmouseout="hideTip(event, 'fs64', 214)" onmouseover="showTip(event, 'fs64', 214)" class="i">Above</span> <span onmouseout="hideTip(event, 'fs61', 215)" onmouseover="showTip(event, 'fs61', 215)" class="i">n</span> <span class="k">-&gt;</span> &lt;@ <span class="k">fun</span> <span onmouseout="hideTip(event, 'fs55', 216)" onmouseover="showTip(event, 'fs55', 216)" class="i">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs55', 217)" onmouseover="showTip(event, 'fs55', 217)" class="i">x</span> <span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs61', 218)" onmouseover="showTip(event, 'fs61', 218)" class="i">n</span> @&gt;
  | <span onmouseout="hideTip(event, 'fs65', 219)" onmouseover="showTip(event, 'fs65', 219)" class="i">Below</span> <span onmouseout="hideTip(event, 'fs61', 220)" onmouseover="showTip(event, 'fs61', 220)" class="i">n</span> <span class="k">-&gt;</span> &lt;@ <span class="k">fun</span> <span onmouseout="hideTip(event, 'fs55', 221)" onmouseover="showTip(event, 'fs55', 221)" class="i">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs55', 222)" onmouseover="showTip(event, 'fs55', 222)" class="i">x</span> <span class="o">&lt;</span> <span onmouseout="hideTip(event, 'fs61', 223)" onmouseover="showTip(event, 'fs61', 223)" class="i">n</span> @&gt;
  | <span onmouseout="hideTip(event, 'fs66', 224)" onmouseover="showTip(event, 'fs66', 224)" class="i">And</span> (<span onmouseout="hideTip(event, 'fs73', 225)" onmouseover="showTip(event, 'fs73', 225)" class="i">t1</span>,<span onmouseout="hideTip(event, 'fs74', 226)" onmouseover="showTip(event, 'fs74', 226)" class="i">t2</span>) <span class="k">-&gt;</span> &lt;@ <span class="k">fun</span> <span onmouseout="hideTip(event, 'fs55', 227)" onmouseover="showTip(event, 'fs55', 227)" class="i">x</span> <span class="k">-&gt;</span> (<span class="o">%</span><span onmouseout="hideTip(event, 'fs71', 228)" onmouseover="showTip(event, 'fs71', 228)" class="i">eval</span> <span onmouseout="hideTip(event, 'fs73', 229)" onmouseover="showTip(event, 'fs73', 229)" class="i">t1</span>) <span onmouseout="hideTip(event, 'fs55', 230)" onmouseover="showTip(event, 'fs55', 230)" class="i">x</span> <span class="o">&amp;&amp;</span> (<span class="o">%</span><span onmouseout="hideTip(event, 'fs71', 231)" onmouseover="showTip(event, 'fs71', 231)" class="i">eval</span> <span onmouseout="hideTip(event, 'fs74', 232)" onmouseover="showTip(event, 'fs74', 232)" class="i">t2</span>) <span onmouseout="hideTip(event, 'fs55', 233)" onmouseover="showTip(event, 'fs55', 233)" class="i">x</span> @&gt;
  | <span onmouseout="hideTip(event, 'fs67', 234)" onmouseover="showTip(event, 'fs67', 234)" class="i">Or</span> (<span onmouseout="hideTip(event, 'fs73', 235)" onmouseover="showTip(event, 'fs73', 235)" class="i">t1</span>,<span onmouseout="hideTip(event, 'fs74', 236)" onmouseover="showTip(event, 'fs74', 236)" class="i">t2</span>) <span class="k">-&gt;</span> &lt;@ <span class="k">fun</span> <span onmouseout="hideTip(event, 'fs55', 237)" onmouseover="showTip(event, 'fs55', 237)" class="i">x</span> <span class="k">-&gt;</span> (<span class="o">%</span><span onmouseout="hideTip(event, 'fs71', 238)" onmouseover="showTip(event, 'fs71', 238)" class="i">eval</span> <span onmouseout="hideTip(event, 'fs73', 239)" onmouseover="showTip(event, 'fs73', 239)" class="i">t1</span>) <span onmouseout="hideTip(event, 'fs55', 240)" onmouseover="showTip(event, 'fs55', 240)" class="i">x</span> <span class="o">||</span> (<span class="o">%</span><span onmouseout="hideTip(event, 'fs71', 241)" onmouseover="showTip(event, 'fs71', 241)" class="i">eval</span> <span onmouseout="hideTip(event, 'fs74', 242)" onmouseover="showTip(event, 'fs74', 242)" class="i">t2</span>) <span onmouseout="hideTip(event, 'fs55', 243)" onmouseover="showTip(event, 'fs55', 243)" class="i">x</span> @&gt;
  | <span onmouseout="hideTip(event, 'fs68', 244)" onmouseover="showTip(event, 'fs68', 244)" class="i">Not</span> (<span onmouseout="hideTip(event, 'fs75', 245)" onmouseover="showTip(event, 'fs75', 245)" class="i">t0</span>) <span class="k">-&gt;</span> &lt;@ <span class="k">fun</span> <span onmouseout="hideTip(event, 'fs55', 246)" onmouseover="showTip(event, 'fs55', 246)" class="i">x</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs76', 247)" onmouseover="showTip(event, 'fs76', 247)" class="i">not</span>((<span class="o">%</span><span onmouseout="hideTip(event, 'fs71', 248)" onmouseover="showTip(event, 'fs71', 248)" class="i">eval</span> <span onmouseout="hideTip(event, 'fs75', 249)" onmouseover="showTip(event, 'fs75', 249)" class="i">t0</span>) <span onmouseout="hideTip(event, 'fs55', 250)" onmouseover="showTip(event, 'fs55', 250)" class="i">x</span>) @&gt;</pre>
</td>
</tr>
</table><p>Notice that given a predicate t, the return value of this function is a quoted function that takes an integer
and returns a boolean.  Moreover, all of the operations we used are Boolean or arithmetic comparisons that any
database can handle in queries.</p>
<p>So, we can plug the predicate obtained from evaluation into the satisfies query combinator, as follows:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span onmouseout="hideTip(event, 'fs77', 251)" onmouseover="showTip(event, 'fs77', 251)" class="i">ex6</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs41', 252)" onmouseover="showTip(event, 'fs41', 252)" class="i">runQuery</span> &lt;@ (<span class="o">%</span><span onmouseout="hideTip(event, 'fs52', 253)" onmouseover="showTip(event, 'fs52', 253)" class="i">satisfies</span>) (<span class="o">%</span><span onmouseout="hideTip(event, 'fs71', 254)" onmouseover="showTip(event, 'fs71', 254)" class="i">eval</span> <span onmouseout="hideTip(event, 'fs69', 255)" onmouseover="showTip(event, 'fs69', 255)" class="i">t0</span>) @&gt;

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs78', 256)" onmouseover="showTip(event, 'fs78', 256)" class="i">ex7</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs41', 257)" onmouseover="showTip(event, 'fs41', 257)" class="i">runQuery</span> &lt;@ (<span class="o">%</span><span onmouseout="hideTip(event, 'fs52', 258)" onmouseover="showTip(event, 'fs52', 258)" class="i">satisfies</span>) (<span class="o">%</span><span onmouseout="hideTip(event, 'fs71', 259)" onmouseover="showTip(event, 'fs71', 259)" class="i">eval</span> <span onmouseout="hideTip(event, 'fs70', 260)" onmouseover="showTip(event, 'fs70', 260)" class="i">t1</span>) @&gt;</pre>
</td>
</tr>
</table><p>Why is this allowed, even though eval is recursive?<br />
Again, notice that although the (%eval t0) computes a quotation .  This all happens before satisfies starts 
working on the</p>

<p>Had we instead tried it in this, simpler way:</p>
<table class="pre"><tr><td class="lines"><pre class="fssnip">
<span class="l">1: </span>
<span class="l">2: </span>
<span class="l">3: </span>
<span class="l">4: </span>
<span class="l">5: </span>
<span class="l">6: </span>
<span class="l">7: </span>
<span class="l">8: </span>
<span class="l">9: </span>
</pre>
</td>
<td class="snippet"><pre class="fssnip">
<span class="k">let</span> <span class="k">rec</span> <span onmouseout="hideTip(event, 'fs79', 261)" onmouseover="showTip(event, 'fs79', 261)" class="i">wrongEval</span> <span onmouseout="hideTip(event, 'fs72', 262)" onmouseover="showTip(event, 'fs72', 262)" class="i">t</span> <span onmouseout="hideTip(event, 'fs55', 263)" onmouseover="showTip(event, 'fs55', 263)" class="i">x</span> <span class="o">=</span>
  <span class="k">match</span> <span onmouseout="hideTip(event, 'fs72', 264)" onmouseover="showTip(event, 'fs72', 264)" class="i">t</span> <span class="k">with</span>
  | <span onmouseout="hideTip(event, 'fs64', 265)" onmouseover="showTip(event, 'fs64', 265)" class="i">Above</span> <span onmouseout="hideTip(event, 'fs61', 266)" onmouseover="showTip(event, 'fs61', 266)" class="i">n</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs55', 267)" onmouseover="showTip(event, 'fs55', 267)" class="i">x</span> <span class="o">&gt;</span><span class="o">=</span> <span onmouseout="hideTip(event, 'fs61', 268)" onmouseover="showTip(event, 'fs61', 268)" class="i">n</span>
  | <span onmouseout="hideTip(event, 'fs65', 269)" onmouseover="showTip(event, 'fs65', 269)" class="i">Below</span> <span onmouseout="hideTip(event, 'fs61', 270)" onmouseover="showTip(event, 'fs61', 270)" class="i">n</span> <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs55', 271)" onmouseover="showTip(event, 'fs55', 271)" class="i">x</span> <span class="o">&lt;</span> <span onmouseout="hideTip(event, 'fs61', 272)" onmouseover="showTip(event, 'fs61', 272)" class="i">n</span>
  | <span onmouseout="hideTip(event, 'fs66', 273)" onmouseover="showTip(event, 'fs66', 273)" class="i">And</span> (<span onmouseout="hideTip(event, 'fs73', 274)" onmouseover="showTip(event, 'fs73', 274)" class="i">t1</span>,<span onmouseout="hideTip(event, 'fs74', 275)" onmouseover="showTip(event, 'fs74', 275)" class="i">t2</span>) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs79', 276)" onmouseover="showTip(event, 'fs79', 276)" class="i">wrongEval</span> <span onmouseout="hideTip(event, 'fs73', 277)" onmouseover="showTip(event, 'fs73', 277)" class="i">t1</span> <span onmouseout="hideTip(event, 'fs55', 278)" onmouseover="showTip(event, 'fs55', 278)" class="i">x</span> <span class="o">&amp;&amp;</span> <span onmouseout="hideTip(event, 'fs79', 279)" onmouseover="showTip(event, 'fs79', 279)" class="i">wrongEval</span> <span onmouseout="hideTip(event, 'fs74', 280)" onmouseover="showTip(event, 'fs74', 280)" class="i">t2</span> <span onmouseout="hideTip(event, 'fs55', 281)" onmouseover="showTip(event, 'fs55', 281)" class="i">x</span>
  | <span onmouseout="hideTip(event, 'fs67', 282)" onmouseover="showTip(event, 'fs67', 282)" class="i">Or</span> (<span onmouseout="hideTip(event, 'fs73', 283)" onmouseover="showTip(event, 'fs73', 283)" class="i">t1</span>,<span onmouseout="hideTip(event, 'fs74', 284)" onmouseover="showTip(event, 'fs74', 284)" class="i">t2</span>) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs79', 285)" onmouseover="showTip(event, 'fs79', 285)" class="i">wrongEval</span> <span onmouseout="hideTip(event, 'fs73', 286)" onmouseover="showTip(event, 'fs73', 286)" class="i">t1</span> <span onmouseout="hideTip(event, 'fs55', 287)" onmouseover="showTip(event, 'fs55', 287)" class="i">x</span> <span class="o">||</span> <span onmouseout="hideTip(event, 'fs79', 288)" onmouseover="showTip(event, 'fs79', 288)" class="i">wrongEval</span> <span onmouseout="hideTip(event, 'fs74', 289)" onmouseover="showTip(event, 'fs74', 289)" class="i">t2</span> <span onmouseout="hideTip(event, 'fs55', 290)" onmouseover="showTip(event, 'fs55', 290)" class="i">x</span> 
  | <span onmouseout="hideTip(event, 'fs68', 291)" onmouseover="showTip(event, 'fs68', 291)" class="i">Not</span> (<span onmouseout="hideTip(event, 'fs75', 292)" onmouseover="showTip(event, 'fs75', 292)" class="i">t0</span>) <span class="k">-&gt;</span> <span onmouseout="hideTip(event, 'fs76', 293)" onmouseover="showTip(event, 'fs76', 293)" class="i">not</span>(<span onmouseout="hideTip(event, 'fs79', 294)" onmouseover="showTip(event, 'fs79', 294)" class="i">wrongEval</span> <span onmouseout="hideTip(event, 'fs75', 295)" onmouseover="showTip(event, 'fs75', 295)" class="i">t0</span> <span onmouseout="hideTip(event, 'fs55', 296)" onmouseover="showTip(event, 'fs55', 296)" class="i">x</span>)

<span class="k">let</span> <span onmouseout="hideTip(event, 'fs80', 297)" onmouseover="showTip(event, 'fs80', 297)" class="i">wrongEx6</span> <span class="o">=</span> <span onmouseout="hideTip(event, 'fs41', 298)" onmouseover="showTip(event, 'fs41', 298)" class="i">runQuery</span> &lt;@ (<span class="o">%</span><span onmouseout="hideTip(event, 'fs52', 299)" onmouseover="showTip(event, 'fs52', 299)" class="i">satisfies</span>) (<span onmouseout="hideTip(event, 'fs79', 300)" onmouseover="showTip(event, 'fs79', 300)" class="i">wrongEval</span> <span onmouseout="hideTip(event, 'fs70', 301)" onmouseover="showTip(event, 'fs70', 301)" class="i">t1</span>) @&gt;</pre>
</td>
</tr>
</table><p>then we would run into the same problem as before, because we would be trying to run satisfies on quoted
  code containing recursive calls, which is not allowed.</p>

<div class="tip" id="fs1">namespace Microsoft</div>
<div class="tip" id="fs2">namespace Microsoft.FSharp</div>
<div class="tip" id="fs3">namespace Microsoft.FSharp.Data</div>
<div class="tip" id="fs4">namespace Microsoft.FSharp.Data.TypeProviders</div>
<div class="tip" id="fs5">namespace FSharpComposableQuery</div>
<div class="tip" id="fs6">val data : int list<br /><br />Full name: Tutorial.data</div>
<div class="tip" id="fs7">val lastNumberInSortedList : int<br /><br />Full name: Tutorial.lastNumberInSortedList</div>
<div class="tip" id="fs8">val query : QueryImpl.QueryBuilder<br /><br />Full name: FSharpComposableQuery.TopLevelValues.query</div>
<div class="tip" id="fs9">val s : int</div>
<div class="tip" id="fs10">custom operation: sortBy (&#39;Key)<br /><br />Calls Linq.QueryBuilder.SortBy </div>
<div class="tip" id="fs11">custom operation: last<br /><br />Calls Linq.QueryBuilder.Last </div>
<div class="tip" id="fs12">Multiple items<br />type LiteralAttribute =<br />&#160;&#160;inherit Attribute<br />&#160;&#160;new : unit -&gt; LiteralAttribute<br /><br />Full name: Microsoft.FSharp.Core.LiteralAttribute<br /><br />--------------------<br />new : unit -&gt; LiteralAttribute</div>
<div class="tip" id="fs13">val ConnectionString : string<br /><br />Full name: Tutorial.ConnectionString</div>
<div class="tip" id="fs14">type dbSchema =<br />&#160;&#160;static member GetDataContext : unit -&gt; MyPeople + 1 overload<br />&#160;&#160;nested type ServiceTypes<br /><br />Full name: Tutorial.dbSchema<br /><em><br /><br />&lt;summary&gt;Provides the types to access a database, using a LINQ-to-SQL mapping&lt;/summary&gt;&lt;param name=&#39;ConnectionString&#39;&gt;The connection string for the database connection. If using Visual Studio, a connection string can be found in database properties in the Server Explorer window.&lt;/param&gt;&lt;param name=&#39;ConnectionStringName&#39;&gt;The name of the connection string for the database connection in the configuration file.&lt;/param&gt;&lt;param name=&#39;LocalSchemaFile&#39;&gt;The local .dbml file for the database schema (default: no local schema file)&lt;/param&gt;&lt;param name=&#39;ForceUpdate&#39;&gt;Require that a direct connection to the database be available at design-time and force the refresh of the local schema file (default: true)&lt;/param&gt;&lt;param name=&#39;Pluralize&#39;&gt;Automatically pluralize or singularize class and member names using English language rules (default: false)&lt;/param&gt;&lt;param name=&#39;Views&#39;&gt;Extract database views (default: true)&lt;/param&gt;&lt;param name=&#39;Functions&#39;&gt;Extract database functions (default: true)&lt;/param&gt;&lt;param name=&#39;ConfigFile&#39;&gt;The name of the configuration file used for connection strings (default: app.config or web.config is used)&lt;/param&gt;&lt;param name=&#39;DataDirectory&#39;&gt;The name of the data directory, used to replace |DataDirectory| in connection strings (default: the project or script directory)&lt;/param&gt;&lt;param name=&#39;ResolutionFolder&#39;&gt;The folder used to resolve relative file paths at compile-time (default: folder containing the project or script)&lt;/param&gt;&lt;param name=&#39;StoredProcedures&#39;&gt;Extract stored procedures (default: true)&lt;/param&gt;&lt;param name=&#39;Timeout&#39;&gt;Timeout value in seconds to use when SqlMetal accesses the database (default: 0, which means infinite)&lt;/param&gt;&lt;param name=&#39;ContextTypeName&#39;&gt;The name of data context class (default: derived from database name)&lt;/param&gt;&lt;param name=&#39;Serializable&#39;&gt;Generate uni-directional serializable classes (default: false, which means no serialization)&lt;/param&gt;</em></div>
<div class="tip" id="fs15">type SqlDataConnection<br /><br />Full name: Microsoft.FSharp.Data.TypeProviders.SqlDataConnection<br /><em><br /><br />&lt;summary&gt;Provides the types to access a database, using a LINQ-to-SQL mapping&lt;/summary&gt;&lt;param name=&#39;ConnectionString&#39;&gt;The connection string for the database connection. If using Visual Studio, a connection string can be found in database properties in the Server Explorer window.&lt;/param&gt;&lt;param name=&#39;ConnectionStringName&#39;&gt;The name of the connection string for the database connection in the configuration file.&lt;/param&gt;&lt;param name=&#39;LocalSchemaFile&#39;&gt;The local .dbml file for the database schema (default: no local schema file)&lt;/param&gt;&lt;param name=&#39;ForceUpdate&#39;&gt;Require that a direct connection to the database be available at design-time and force the refresh of the local schema file (default: true)&lt;/param&gt;&lt;param name=&#39;Pluralize&#39;&gt;Automatically pluralize or singularize class and member names using English language rules (default: false)&lt;/param&gt;&lt;param name=&#39;Views&#39;&gt;Extract database views (default: true)&lt;/param&gt;&lt;param name=&#39;Functions&#39;&gt;Extract database functions (default: true)&lt;/param&gt;&lt;param name=&#39;ConfigFile&#39;&gt;The name of the configuration file used for connection strings (default: app.config or web.config is used)&lt;/param&gt;&lt;param name=&#39;DataDirectory&#39;&gt;The name of the data directory, used to replace |DataDirectory| in connection strings (default: the project or script directory)&lt;/param&gt;&lt;param name=&#39;ResolutionFolder&#39;&gt;The folder used to resolve relative file paths at compile-time (default: folder containing the project or script)&lt;/param&gt;&lt;param name=&#39;StoredProcedures&#39;&gt;Extract stored procedures (default: true)&lt;/param&gt;&lt;param name=&#39;Timeout&#39;&gt;Timeout value in seconds to use when SqlMetal accesses the database (default: 0, which means infinite)&lt;/param&gt;&lt;param name=&#39;ContextTypeName&#39;&gt;The name of data context class (default: derived from database name)&lt;/param&gt;&lt;param name=&#39;Serializable&#39;&gt;Generate uni-directional serializable classes (default: false, which means no serialization)&lt;/param&gt;</em></div>
<div class="tip" id="fs16">val db : dbSchema.ServiceTypes.SimpleDataContextTypes.MyPeople<br /><br />Full name: Tutorial.db</div>
<div class="tip" id="fs17">dbSchema.GetDataContext() : dbSchema.ServiceTypes.SimpleDataContextTypes.MyPeople<br /><em><br /><br />Get a simplified data context for this SQL connection. By default, no credentials are set</em><br />dbSchema.GetDataContext(connectionString: string) : dbSchema.ServiceTypes.SimpleDataContextTypes.MyPeople<br /><em><br /><br />Get a simplified data context for this SQL connection. By default, no credentials are set</em></div>
<div class="tip" id="fs18">type People = dbSchema.ServiceTypes.People<br /><br />Full name: Tutorial.People</div>
<div class="tip" id="fs19">type ServiceTypes =<br />&#160;&#160;nested type Couples<br />&#160;&#160;nested type MyPeople<br />&#160;&#160;nested type People<br />&#160;&#160;nested type SimpleDataContextTypes<br /><br />Full name: Tutorial.dbSchema.ServiceTypes<br /><em><br /><br />&lt;summary&gt;&lt;para&gt;The full API to the SQL connection.&lt;/para&gt;&lt;para&gt;To use the service via the full API, create an instance of one of the types &#39;MyPeople&#39;.&lt;/para&gt;&lt;/summary&gt;</em></div>
<div class="tip" id="fs20">type People =<br />&#160;&#160;interface INotifyPropertyChanging<br />&#160;&#160;interface INotifyPropertyChanged<br />&#160;&#160;new : unit -&gt; People<br />&#160;&#160;member Age : int with get, set<br />&#160;&#160;member Name : string with get, set<br />&#160;&#160;event PropertyChanged : PropertyChangedEventHandler<br />&#160;&#160;event PropertyChanging : PropertyChangingEventHandler<br /><br />Full name: Tutorial.dbSchema.ServiceTypes.People</div>
<div class="tip" id="fs21">type PeopleR =<br />&#160;&#160;{name: string;<br />&#160;&#160;&#160;age: int;}<br /><br />Full name: Tutorial.PeopleR</div>
<div class="tip" id="fs22">PeopleR.name: string</div>
<div class="tip" id="fs23">Multiple items<br />val string : value:&#39;T -&gt; string<br /><br />Full name: Microsoft.FSharp.Core.Operators.string<br /><br />--------------------<br />type string = System.String<br /><br />Full name: Microsoft.FSharp.Core.string</div>
<div class="tip" id="fs24">PeopleR.age: int</div>
<div class="tip" id="fs25">Multiple items<br />val int : value:&#39;T -&gt; int (requires member op_Explicit)<br /><br />Full name: Microsoft.FSharp.Core.Operators.int<br /><br />--------------------<br />type int&lt;&#39;Measure&gt; = int<br /><br />Full name: Microsoft.FSharp.Core.int&lt;_&gt;<br /><br />--------------------<br />type int = int32<br /><br />Full name: Microsoft.FSharp.Core.int</div>
<div class="tip" id="fs26">val range1 : a:int -&gt; b:int -&gt; System.Linq.IQueryable&lt;PeopleR&gt;<br /><br />Full name: Tutorial.range1</div>
<div class="tip" id="fs27">val a : int</div>
<div class="tip" id="fs28">val b : int</div>
<div class="tip" id="fs29">val u : dbSchema.ServiceTypes.People</div>
<div class="tip" id="fs30">property dbSchema.ServiceTypes.SimpleDataContextTypes.MyPeople.People: System.Data.Linq.Table&lt;dbSchema.ServiceTypes.People&gt;<br /><em><br /><br />Gets the &#39;People&#39; entities from the SQL connection. This property may be used as the source in a query expression.</em></div>
<div class="tip" id="fs31">property dbSchema.ServiceTypes.People.Age: int</div>
<div class="tip" id="fs32">property dbSchema.ServiceTypes.People.Name: string</div>
<div class="tip" id="fs33">val ex1 : System.Linq.IQueryable&lt;PeopleR&gt;<br /><br />Full name: Tutorial.ex1</div>
<div class="tip" id="fs34">val range : Quotations.Expr&lt;(int -&gt; int -&gt; System.Linq.IQueryable&lt;PeopleR&gt;)&gt;<br /><br />Full name: Tutorial.range</div>
<div class="tip" id="fs35">val ex2 : System.Linq.IQueryable&lt;PeopleR&gt;<br /><br />Full name: Tutorial.ex2</div>
<div class="tip" id="fs36">val x : PeopleR</div>
<div class="tip" id="fs37">val wrongEx2 : System.Linq.IQueryable&lt;PeopleR&gt;<br /><br />Full name: Tutorial.wrongEx2</div>
<div class="tip" id="fs38">namespace System</div>
<div class="tip" id="fs39">namespace System.Linq</div>
<div class="tip" id="fs40">Multiple items<br />type IQueryable =<br />&#160;&#160;member ElementType : Type<br />&#160;&#160;member Expression : Expression<br />&#160;&#160;member Provider : IQueryProvider<br /><br />Full name: System.Linq.IQueryable<br /><br />--------------------<br />type IQueryable&lt;&#39;T&gt; =<br /><br />Full name: System.Linq.IQueryable&lt;_&gt;</div>
<div class="tip" id="fs41">val runQuery : q:Quotations.Expr&lt;#System.Linq.IQueryable&lt;&#39;b&gt;&gt; -&gt; System.Linq.IQueryable&lt;&#39;b&gt;<br /><br />Full name: Tutorial.runQuery</div>
<div class="tip" id="fs42">val q : Quotations.Expr&lt;#System.Linq.IQueryable&lt;&#39;b&gt;&gt;</div>
<div class="tip" id="fs43">val x : &#39;b</div>
<div class="tip" id="fs44">val ex2again : System.Linq.IQueryable&lt;PeopleR&gt;<br /><br />Full name: Tutorial.ex2again</div>
<div class="tip" id="fs45">val ageFromName : Quotations.Expr&lt;(string -&gt; System.Linq.IQueryable&lt;int&gt;)&gt;<br /><br />Full name: Tutorial.ageFromName</div>
<div class="tip" id="fs46">val s : string</div>
<div class="tip" id="fs47">val compose : Quotations.Expr&lt;(string -&gt; string -&gt; System.Linq.IQueryable&lt;PeopleR&gt;)&gt;<br /><br />Full name: Tutorial.compose</div>
<div class="tip" id="fs48">val t : string</div>
<div class="tip" id="fs49">val composeMonolithic : Quotations.Expr&lt;(string -&gt; string -&gt; System.Linq.IQueryable&lt;PeopleR&gt;)&gt;<br /><br />Full name: Tutorial.composeMonolithic</div>
<div class="tip" id="fs50">val u1 : dbSchema.ServiceTypes.People</div>
<div class="tip" id="fs51">val u2 : dbSchema.ServiceTypes.People</div>
<div class="tip" id="fs52">val satisfies : Quotations.Expr&lt;((int -&gt; bool) -&gt; System.Linq.IQueryable&lt;PeopleR&gt;)&gt;<br /><br />Full name: Tutorial.satisfies</div>
<div class="tip" id="fs53">val p : (int -&gt; bool)</div>
<div class="tip" id="fs54">val ex3 : System.Linq.IQueryable&lt;PeopleR&gt;<br /><br />Full name: Tutorial.ex3</div>
<div class="tip" id="fs55">val x : int</div>
<div class="tip" id="fs56">val ex4 : System.Linq.IQueryable&lt;PeopleR&gt;<br /><br />Full name: Tutorial.ex4</div>
<div class="tip" id="fs57">val wrong1 : System.Linq.IQueryable&lt;PeopleR&gt;<br /><br />Full name: Tutorial.wrong1</div>
<div class="tip" id="fs58">val age : int</div>
<div class="tip" id="fs59">val printfn : format:Printf.TextWriterFormat&lt;&#39;T&gt; -&gt; &#39;T<br /><br />Full name: Microsoft.FSharp.Core.ExtraTopLevelOperators.printfn</div>
<div class="tip" id="fs60">val even : n:int -&gt; bool<br /><br />Full name: Tutorial.even</div>
<div class="tip" id="fs61">val n : int</div>
<div class="tip" id="fs62">val wrong2 : System.Linq.IQueryable&lt;PeopleR&gt;<br /><br />Full name: Tutorial.wrong2</div>
<div class="tip" id="fs63">type Predicate =<br />&#160;&#160;| Above of int<br />&#160;&#160;| Below of int<br />&#160;&#160;| And of Predicate * Predicate<br />&#160;&#160;| Or of Predicate * Predicate<br />&#160;&#160;| Not of Predicate<br /><br />Full name: Tutorial.Predicate</div>
<div class="tip" id="fs64">union case Predicate.Above: int -&gt; Predicate</div>
<div class="tip" id="fs65">union case Predicate.Below: int -&gt; Predicate</div>
<div class="tip" id="fs66">union case Predicate.And: Predicate * Predicate -&gt; Predicate</div>
<div class="tip" id="fs67">union case Predicate.Or: Predicate * Predicate -&gt; Predicate</div>
<div class="tip" id="fs68">union case Predicate.Not: Predicate -&gt; Predicate</div>
<div class="tip" id="fs69">val t0 : Predicate<br /><br />Full name: Tutorial.t0</div>
<div class="tip" id="fs70">val t1 : Predicate<br /><br />Full name: Tutorial.t1</div>
<div class="tip" id="fs71">val eval : t:Predicate -&gt; Quotations.Expr&lt;(int -&gt; bool)&gt;<br /><br />Full name: Tutorial.eval</div>
<div class="tip" id="fs72">val t : Predicate</div>
<div class="tip" id="fs73">val t1 : Predicate</div>
<div class="tip" id="fs74">val t2 : Predicate</div>
<div class="tip" id="fs75">val t0 : Predicate</div>
<div class="tip" id="fs76">val not : value:bool -&gt; bool<br /><br />Full name: Microsoft.FSharp.Core.Operators.not</div>
<div class="tip" id="fs77">val ex6 : System.Linq.IQueryable&lt;PeopleR&gt;<br /><br />Full name: Tutorial.ex6</div>
<div class="tip" id="fs78">val ex7 : System.Linq.IQueryable&lt;PeopleR&gt;<br /><br />Full name: Tutorial.ex7</div>
<div class="tip" id="fs79">val wrongEval : t:Predicate -&gt; x:int -&gt; bool<br /><br />Full name: Tutorial.wrongEval</div>
<div class="tip" id="fs80">val wrongEx6 : System.Linq.IQueryable&lt;PeopleR&gt;<br /><br />Full name: Tutorial.wrongEx6</div>

        </div>
        <div class="span3">
          <ul class="nav nav-list" id="menu">
            <li class="nav-header">FSharpComposableQuery</li>
            <li><a href="http://fsprojects.github.io/FSharp.Linq.Experimental.ComposableQuery/index.html">Home page</a></li>
            <li class="divider"></li>
            <li><a href="http://nuget.com/packages/FSharpComposableQuery">Get Library via NuGet</a></li>
            <li><a href="http://github.com/fsharp/FSharpComposableQuery">Source Code on GitHub</a></li>
            <li><a href="http://github.com/fsharp/FSharpComposableQuery/blob/master/LICENSE.txt">License</a></li>
            <li><a href="http://github.com/fsharp/FSharpComposableQuery/blob/master/RELEASE_NOTES.md">Release Notes</a></li>
            
            <li class="nav-header">Getting started</li>
            <li><a href="http://fsprojects.github.io/FSharp.Linq.Experimental.ComposableQuery/index.html">Home page</a></li>
            <li><a href="http://fsprojects.github.io/FSharp.Linq.Experimental.ComposableQuery/tutorial.html">Sample tutorial</a></li>
            <li><a href="http://fsprojects.github.io/FSharp.Linq.Experimental.ComposableQuery/QueryExamples.html">Query Examples</a></li>

            <li class="nav-header">Documentation</li>
            <li><a href="http://fsprojects.github.io/FSharp.Linq.Experimental.ComposableQuery/reference/index.html">API Reference</a></li>
          </ul>
        </div>
      </div>
    </div>
    <a href="http://github.com/fsharp/FSharpComposableQuery"><img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_gray_6d6d6d.png" alt="Fork me on GitHub"></a>
  </body>
  </html>
